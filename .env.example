# Grok Imagine API Gateway 配置文件
# 配置优先级: 环境变量 > .env 文件 > 默认值

# ============ 服务器配置 ============
HOST=0.0.0.0
PORT=9563
# DEBUG 模式: true 时保存日志到 log.txt, false 时不保存
DEBUG=false

# ============ API 安全 ============
API_KEY=admin

# ============ 代理配置 ============
# 支持 http/https/socks5 代理，取消注释并填写你的代理地址
PROXY_URL=http://127.0.0.1:7890
# PROXY_URL=socks5://127.0.0.1:1080

# ============ SSO 配置 ============
# SSO 密钥文件路径 (每行一个 token)
SSO_FILE=key.txt

# ============ 图片存储 ============
# 注意: 如果你修改了 PORT，需要同步修改这里的端口号
# 如果通过反向代理或域名访问，填写实际的外部访问地址
# BASE_URL=http://127.0.0.1:9563

# ============ 生成配置 ============
DEFAULT_ASPECT_RATIO=2:3
GENERATION_TIMEOUT=120

# ============ 存储模式选择 ============
# 选择 SSO 状态存储方式：
#   false = 文件模式（状态保存到 sso_state.json）
#   true  = Redis 模式（状态保存到 Redis，支持分布式）
REDIS_ENABLED=false

# ============ Redis 配置 ============
# 仅当 REDIS_ENABLED=true 时生效
REDIS_URL=redis://127.0.0.1/0

# ============ SSO 轮询配置 ============
# 轮询策略（两种模式通用）:
#   round_robin  - 简单轮询，按顺序使用
#   least_used   - 最少使用优先，优先用今日调用少的 key
#   least_recent - 最久未用优先，让 key 有更多恢复时间
#   weighted     - 权重轮询，根据剩余配额加权随机
#   hybrid       - 混合策略（推荐），综合配额和时间评分
SSO_ROTATION_STRATEGY=hybrid

# 每个 key 每24小时限制调用次数（每次调用生成4张图）
SSO_DAILY_LIMIT=10
